# 卷积

## 1. 卷积操作

### 1.1 卷积的基本概念

1. **卷积核**：一个用于图像滤波的矩阵，常见的有高斯卷积核和均值卷积核

2. **卷积**：图像处理中的基本操作，通过卷积核对图像进行处理，得到卷积后的图像

### 1.2 卷积的计算方法

设 $F$ 为图像， $H$ 为卷积核， $F$ 与 $H$ 的卷积表示为：

$$
R = F * H
$$

计算式为：

$$
R_{ij} = \sum_{u,v} F_{i−u,j−v} H_{u,v}
$$

其中：

- $R_{ij}$：输出图像在 $(i,j)$ 的像素值
- $H$：卷积核
- $F$：输入图像
- $u,v$：卷积核的索引变量，遍历卷积核的所有元素

### 1.3 卷积的特性

1. **叠加性**

$$
\text{filter}(f_1+f_2) = \text{filter}(f_1) + \text{filter}(f_2)
$$

2. **平移不变性**

$$
\text{filter(shift(f))} = \text{shift(filter(f))}
$$

3. **交换律**

$$
f * g = g * f
$$

4. **结合律**

$$
(f * g) * h = f * (g * h)
$$

5. **分配律**

$$
f * (g + h) = f * g + f * h
$$

6. **数乘结合律**

$$
c * (f * g) = (c * f) * g \text{, } \forall c \in C
$$

7. **微积分特性**

$$
\frac{d}{dt}(f * g) = \frac{df}{dt} * g
$$

## 2. 图像卷积处理

### 2.1 边界填充方法

1. **常数填充**：最常用的是零填充
2. **镜像填充**：使用图像的镜像部分进行填充
3. **复制填充**：复制图像的边界像素进行填充

### 2.2 利用卷积进行图像操作

1. **平移**：例如，以下卷积核可以实现向左平移一个像素：

$$
\begin{bmatrix}
0 & 0 & 0 \\
0 & 0 & 1 \\
0 & 0 & 0
\end{bmatrix}
$$

2. **平滑**：例如，可以使用均值滤波器：

$$
\begin{bmatrix}
\frac{1}{9} & \frac{1}{9} & \frac{1}{9} \\
\frac{1}{9} & \frac{1}{9} & \frac{1}{9} \\
\frac{1}{9} & \frac{1}{9} & \frac{1}{9}
\end{bmatrix}
$$

3. **锐化**：例如，可以使用以下卷积核进行锐化：

$$
\begin{bmatrix}
-1 & -1 & -1 \\
-1 & 9 & -1 \\
-1 & -1 & -1
\end{bmatrix}
$$

4. ……

## 3. 高斯卷积核

### 3.1 均值滤波的问题

1. **振铃现象**：在图像处理中使用均值滤波器时，图像中会出现一些水平和竖直方向的条状伪影。这种现象是由于均值滤波器在处理图像边缘时，无法很好地保留边缘信息，导致边缘处的像素值被平滑，产生了不自然的条纹
2. **解决方法**：可以根据邻域像素与中心的远近程度分配权重，使用高斯卷积核来代替均值滤波器，从而减少振铃现象的发生

### 3.2 高斯卷积核的定义

尺寸为3 $\times$ 3，标准差为 $\sigma$ 的高斯卷积核

$$
\begin{bmatrix}
G(-1,1) & G(0,1) & G(1,1) \\
G(-1,0) & G(0,0) & G(1,0) \\
G(-1,-1) & G(0,-1) & G(1,-1)
\end{bmatrix}
$$

其中：

$$
G(x, y) = \frac{1}{2 \pi \sigma^2}e^{-\frac{x^2 + y^2}{2 \sigma^2}}
$$

### 3.3 参数设置

1. **方差**：方差越大，平滑能力越强

2. **尺寸**：尺寸越大，平滑能力越强

### 3.4 高斯卷积核特性

1. **低通滤波器**

2. 卷积性质：两个高斯卷积核卷积后得到的还是高斯卷积核

   - 使用多次小方差卷积核连续卷积，可以得到与大方差卷积核相同的结果
   - 使用标准差为 σ 的高斯卷积核进行两次卷积与使用标准差为 $\sqrt{2}\sigma$ 的高斯卷积核进行一次卷积效果相同

3. 可分离性：高斯卷积核可分解为两个一维高斯的乘积

$$
\frac{1}{16}
\begin{bmatrix}
1 & 2 & 1 \\
2 & 4 & 2 \\
1 & 2 & 1
\end{bmatrix} =
\frac{1}{4}
\begin{bmatrix}
1 \\
2 \\
1
\end{bmatrix}
\times \frac{1}{4}
\begin{bmatrix}
1 & 2 & 1
\end{bmatrix}
$$

## 4. 中值滤波

### 4.1 中值滤波的概念
**中值滤波**是一种非线性滤波技术，用于去除图像中的噪声。它通过将像素值替换为其邻域像素值的中值来实现

### 4.2 中值滤波的作用
- **去除椒盐噪声**：中值滤波特别适用于去除图像中的**椒盐噪声**（也称为**脉冲噪声**），这种噪声表现为图像中随机出现的白点或黑点
- **保持边缘细节**：与其他滤波器相比，中值滤波在去噪的同时更好地保持了图像的边缘细节
